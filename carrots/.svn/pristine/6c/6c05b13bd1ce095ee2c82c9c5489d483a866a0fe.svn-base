angular.module('myApp')
    .factory('commonUtil', function () {
        return {
            //刷新搜索栏保持高亮
            keepSelect: function (urlParams, urlArray, Constant, theArray) {
                theArray = [];
                if (urlParams) {
                    urlArray = urlParams.split(',');
                    Constant[0].choose = false;
                    angular.forEach(urlArray, function (theItem) {
                        angular.forEach(Constant, function (item) {
                            if (Number(theItem) === item.id) {
                                item.choose = true;
                                theArray.push(item.id);
                            }
                        })
                    })
                }
            },
            //搜索栏多选参数，选择不限的时候，取消所有子项
            choseUnlimited: function (Constant, theArray) {
                angular.forEach(Constant, function (item) {
                    item.choose = false;
                });
                Constant[0].choose = true;
                theArray = [];
                return theArray;
            },
            // 搜索栏多选参数
            checkBox: function (Constant, theArray, Index, Choose) {
                theArray = [];
                Constant[0].choose = false;
                Constant[Index].choose = !Choose;
                angular.forEach(Constant, function (item) {
                    if (item.choose === true) {
                        theArray.push(item.id)
                    }
                });
                return theArray;
            },
            //搜索栏清除
            clearAll: function (Array) {
                angular.forEach(Array, function (item) {
                    item.choose = false;
                    Array[0].choose = true;
                })
            },
            //url参数清空
            clearUrl: function (params) {
                angular.forEach(params, function (val, key, object) {
                    object[key] = undefined;
                })
            }
        }
    });