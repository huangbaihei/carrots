angular.module('myApp')
    .factory('requestSvc', ['$http', 'path', function ($http, path) {
        return {
            /*首页模块*/
            homeBanner: function(params) {
                return $http.get(path.homeBanner_url(), {params: params})
            },
            careerBanner: function(params) {
                return $http.get(path.careerBanner_url(), {params: params})
            },
            /*找职位模块*/

            //获取banner列表
            getBannerList: function(params) {
                return $http.get(path.getBannerList_url(),{params: params});
            },
            //获取职位列表
            getJobList: function (params) {
                return $http.get(path.getJobList_url(),{params:params})
            },
            // 职位搜索
            getSearchJob: function(params) {
                return $http.get(path.searchJob_url(), {params: params});
            },
            //获取公司列表
            getCompanyList:function (params) {
                return $http.get(path.getCompanyList_url(),{params:params})
            },
            //获取公司详情
            getCompanyDetils: function(id) {
                return $http.get(path.companyDetails_url(id));
            },
            /*找精英模块*/

            /*关于我们模块*/


            // 数据判断
            judgeStorage:function(judge, data) {
                var dataCopy = angular.copy(data);
                if(judge === undefined) {
                    var select = dataCopy;
                }
                else {
                    select = JSON.parse(judge);
                }
                return select;
            },
            // 判断需要展开详情的类目
            judgeShow:function (data) {
                for (var j = 0; j < 12; j++) {
                    if (data[j].choose === true) {
                        return j;
                    }
                }
            },

            // 判断选中的数量
            selectedNum:function (data) {
                var i = 0;
                data.forEach(function (item) {
                    if (item.choose === true) {
                        i++;
                    }
                });
                return i;
            },
            // 标签多选
            checkbox:function (ind, arr) {
                if (ind === 0) {
                    arr.forEach(function (item) {
                        item.choose = false
                    });
                    arr[0].choose = true
                } else {
                    arr[ind].choose = !arr[ind].choose;
                    arr[0].choose = false;
                    if (arr.every(function (item) {
                        return item.choose === false
                    })) {
                        arr[0].choose = !arr[0].choose;
                    }
                }
            },

            //搜索单选
            radio:function (ind, arr) {
                arr[ind].choose = !arr[ind].choose;
                arr.forEach(function (item, index) {
                    if (index !== ind) {
                        item.choose = false
                    }
                    else if (arr.every(function (item) {
                        return item.choose === false
                    })) {
                        arr[0].choose = true;
                    }
                })
            },

            //数据转数组
            dataConvert:function (data) {
                //转换为字符串
                var dataObj = {};
                var dataName;
                for (dataName in data) {
                    dataObj[dataName] = data[dataName].filter(function (item, index) {
                        return item.choose === true
                    });
                    dataObj[dataName] = dataObj[dataName].map(function (item) {
                        return item.id
                    });
                    dataObj[dataName] = dataObj[dataName].toString()
                }
                return dataObj;
            },
            // 拆分字符串
            sprSplit:function(data) {
                if (data.length > 0) {
                    data.forEach(function (item) {
                        // item.tags = item.tags.split(",");
                        item.tags = item.tags.slice(0, 3);
                    })
                }
            }
        }
    }]);